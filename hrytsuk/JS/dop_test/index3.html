<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;

        }
        body{
            font-family: Arial,sans-serif;
        }
        .wrap{
            width: 300px;
            padding: 15px;
            margin: 0 auto;

        }
        select{
            display: block;
            width: 100%;
            box-sizing: border-box;
        }
        .mySelect{
            width: 100%;
        }
        .tittle{
            border: 1px solid;
            padding: 10px;
            cursor: pointer;

        }
        .options{
            border: 1px solid;
            border-top: none;
            display: none;
        }
        li{
            list-style-type: none;
            padding: 10px 30px;
            border-bottom: 1px solid;
        }
        li:hover{
            background-color: lightgray;
            cursor: pointer;
        }
        li:last-of-type{
            border: none;
        }
        .active{
            display: block;
        }
        li[data-selected-option]{
            position: relative;
        }
        li[data-selected-option]::before{
            content: '+';
            display: block;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: green;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            right: 15px;
            text-align: center;
            color: aliceblue;
        }
    </style>
</head>
<body>
<div class="wrap">
    <!--    <div class="mySelect">-->
    <!--        <div class="tittle" data-selected="1">1</div>-->
    <!--        <div class="options">-->
    <!--            <ul>-->
    <!--                <li data-option="1">1</li>-->
    <!--                <li data-option="2">2</li>-->
    <!--                <li data-option="3">3</li>-->
    <!--            </ul>-->
    <!--        </div>-->
    <!--    </div>-->
    <select class="select" name="name">
        <option value="1">1</option>
        <option value="2" selected>2</option>
        <option value="3" >3</option>
        <option value="4">4</option>
    </select>
</div>
<script>
    function CustomSelect(options) {
        this.options = options || {};

        this.selector = this.createElem('div', {'class': 'mySelect'});

        this.optionsList = this.options.select.children;

        this.optionBox = this.createElem('div', {'class':'options'});
        this.status = false;
        this.title = undefined;
        this.init = function () {
            var firstOption =  this.getOptionContent(this.getSelected());
            this.selector.appendChild(this.title);
            this.selector.appendChild(this.createElem('div', setAttr(firstOption.attr, 'tittle', true), firstOption.text));
            this.selector.appendChild(this.optionBox);
            this.optionBox.appendChild(this.buildOption.call(this, this.createElem('ul')));
            this.selector.addEventListener('click', function (e) {
                if (!this.status){
                    this.optionBox.classList.add('active');
                    this.status = true;
                }
                else {
                    this.optionBox.classList.remove('active');
                    this.status = false;
                }
                var optionValue = e.target.dataset.option;
             if (optionValue){
                 selectOption.call(this,optionValue);
                 this.title.dataset.selected = optionValue;
                 this.title.textContent = optionValue;
             }

            }.bind(this));
            this.options.select.parentElement.insertBefore(this.selector, this.options.select);
        };
        function selectOption(value) {
            for (var i=0; i<this.optionsList.length;i++){

                if (this.optionsList[i] ==value){
                    this.optionsList[i].selected = true;
                }
            }
        }
        function closeSelect(e) {

            this.optionBox.classList.remove('active');
        }
        function setAttr(attr, classElem, flag, text) {
            var data = {};
            for (var i = 0; i < attr.length; i++){
                if(flag && !data['data-selected']){

                    data['data-selected'] = attr.value.value;
                }
                else if(!flag && !data['data-selected']){
                    data['data-selected'] = attr.value.value;
                }
                if (attr.selected && !flag){
                    data['data-selected-option'] = '';
                }
            }
            if (classElem){
                data['class'] = classElem;
            }
            return data;
        }
        this.getSelected = function () {
            for (var i = 0; i < this.optionsList.length; i++){
                if(this.optionsList[i].selected) return i;

            }
            return 0;
        }
        this.getOptionContent = function (index) {
            var data = {};
            data.attr = this.optionsList[index].attributes;
            data.text = this.optionsList[index].textContent;
            return data;

        }
        this.buildOption = function (ul) {
            for (var i = 0; i < this.optionsList.length; i++){
                var option = this.getOptionContent(i);
                ul.appendChild(createElement('li', setAttr(option.attr, undefined, false), option.text));
            }
            return ul;
        };
        this.init()
    }
    CustomSelect.prototype.createElem = createElement;

    var mySelect = new CustomSelect({
        select: document.querySelector('.select'),
    });


    function createElement(elem, attr, text) {
        if (!elem) return false;

        var el = document.createElement(elem);
        if (attr){
            for (var key in attr){
                el.setAttribute(key, attr[key])
            }
        }
        if (text){
            el.textContent = text;
        }
        return el;
    }
    var myElem = createElement('div', {'data-bind': 'text:rrr', 'class': 'wrap'},'text');
    myElem.addEventListener('click', function () {
        alert('sdsd')
    })
    document.querySelector('body').appendChild(myElem)

</script>
</body>
</html>